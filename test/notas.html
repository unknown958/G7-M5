<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora Notas</title>

<style>

:root{
    --azul:#1e3a8a;
    --azul-claro:#3b82f6;
    --rojo:#dc2626;
    --gris:#6b7280;
    --fondo:#f4f6fb;
    --card:#ffffff;
    --borde:#e5e7eb;
}

*{
    box-sizing:border-box;
    margin:0;
    padding:0;
}

body{
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--fondo);
    min-height:100vh;
    padding-bottom:40px;
    color:#111827;
}

/* HEADER */
header{
    background: linear-gradient(90deg,var(--azul),var(--azul-claro));
    color:white;
    text-align:center;
    padding:22px;
    font-size:20px;
    font-weight:700;
    box-shadow:0 4px 20px rgba(0,0,0,0.15);
}

/* TARJETAS */
.area{
    background: var(--card);
    margin:22px auto;
    padding:20px;
    width:95%;
    max-width:900px;
    border-radius:16px;
    border:1px solid var(--borde);
    box-shadow:0 10px 25px rgba(0,0,0,0.06);
}

.area h2{
    margin-bottom:16px;
    color:var(--azul);
    font-size:16px;
    font-weight:700;
    border-left:4px solid var(--rojo);
    padding-left:10px;
}

.modulo{
    display:grid;
    grid-template-columns: 1fr 85px 110px;
    align-items:center;
    gap:15px;
    padding:12px 14px;
    margin-bottom:10px;
    border-radius:10px;
    background:#f9fafc;
    border:1px solid #eef1f6;
}

.modulo span:first-child{
    font-weight:600;
    font-size:14px;
}

.modulo input{
    width:100%;
    padding:8px;
    border-radius:8px;
    border:1px solid #d1d5db;
    text-align:center;
    font-weight:600;
}

.modulo span:last-child{
    text-align:right;
    font-weight:700;
    color:var(--azul);
}

/* RESULTADOS */
.resultado-area{
    margin-top:14px;
    padding:12px;
    background:#eef2ff;
    border-radius:10px;
    font-weight:600;
}

.total-final{
    margin:30px auto;
    width:95%;
    max-width:900px;
    padding:25px;
    border-radius:18px;
    text-align:center;
    background: linear-gradient(135deg,var(--azul),var(--azul-claro));
    color:white;
    font-size:18px;
    font-weight:700;
}

/* ========================= */
/*        MODO OSCURO        */
/* ========================= */

body.dark-mode{
    background:#111827;
    color:#e5e7eb;
}

body.dark-mode .area{
    background:#1f2937;
    border-color:#374151;
}

body.dark-mode .area h2{
    color:#60a5fa;
}

body.dark-mode .modulo{
    background:#111827;
    border-color:#374151;
}

body.dark-mode .modulo span:first-child{
    color:#f3f4f6;
}

body.dark-mode .modulo input{
    background:#1f2937;
    border-color:#374151;
    color:white;
}

body.dark-mode .resultado-area{
    background:#1f2937;
    color:#93c5fd;
}

body.dark-mode .total-final{
    background:linear-gradient(135deg,#0f172a,#1e3a8a);
}

</style>
</head>
<body>

<div id="contenedor"></div>

<div class="area">
<h2>RESULTADO GENERAL</h2>
<div class="resultado-area">
Total: <span id="totalGeneral">0</span> / 600<br><br>
Nota Final Sobre 10: <span id="notaFinal">0</span>
</div>
</div>

<script>

/* ========================= */
/* CONFIGURACIÓN             */
/* ========================= */
const areas = [
{
    nombre:"ÁREA TÉCNICO PROFESIONAL",
    max:320,
    modulos:[
        {nombre:"M1", peso:20},
        {nombre:"M2", peso:35},
        {nombre:"M3", peso:40},
        {nombre:"M4", peso:20},
        {nombre:"M5", peso:40},
        {nombre:"M6", peso:45},
        {nombre:"M7", peso:40},
        {nombre:"M8", peso:40},
        {nombre:"M9", peso:20}
    ]
},
{
    nombre:"ÁREA DE LENGUAJE",
    max:30,
    modulos:[
        {nombre:"M10", peso:30}
    ]
},
{
    nombre:"ÁREA INTERVENCIÓN POLICIAL",
    max:135,
    modulos:[
        {nombre:"M11", peso:45},
        {nombre:"M12", peso:50},
        {nombre:"M13", peso:40},
        {nombre:"M14", peso:0}
    ]
},
{
    nombre:"ÁREA DESTREZAS POLICIALES",
    max:105,
    modulos:[
        {nombre:"M15", peso:35},
        {nombre:"M16", peso:35},
        {nombre:"M17", peso:35}
    ]
}
];

const contenedor = document.getElementById("contenedor");

/* ========================= */
/* CREAR INTERFAZ            */
/* ========================= */

areas.forEach((area,aIndex)=>{

const areaDiv = document.createElement("div");
areaDiv.className="area";
areaDiv.innerHTML=`<h2>${area.nombre}</h2>`;

area.modulos.forEach((mod,mIndex)=>{

const moduloDiv=document.createElement("div");
moduloDiv.className="modulo";

moduloDiv.innerHTML=`
<span>${mod.nombre}</span>
<input type="number" step="0.001" min="0" max="10" id="nota-${aIndex}-${mIndex}">
<span>Ptos: <strong id="ptos-${aIndex}-${mIndex}">0</strong></span>
`;

areaDiv.appendChild(moduloDiv);
});

areaDiv.innerHTML+=`
<div class="resultado-area">
Total Área: <span id="total-area-${aIndex}">0</span> / ${area.max}<br>
Media Área: <span id="media-area-${aIndex}">0</span>
</div>
`;

contenedor.appendChild(areaDiv);
});

/* ========================= */
/* CALCULO                   */
/* ========================= */

document.addEventListener("input",calcular);

function calcular(){

let totalGeneral=0;

areas.forEach((area,aIndex)=>{

let totalArea=0;

area.modulos.forEach((mod,mIndex)=>{

const key=`nota-${aIndex}-${mIndex}`;
let nota=parseFloat(document.getElementById(key).value)||0;

localStorage.setItem(key,nota);

let puntos=(nota/10)*mod.peso;

document.getElementById(`ptos-${aIndex}-${mIndex}`).innerText=puntos.toFixed(3);

totalArea+=puntos;
});

document.getElementById(`total-area-${aIndex}`).innerText=totalArea.toFixed(3);

let mediaArea=(totalArea/area.max)*10;
document.getElementById(`media-area-${aIndex}`).innerText=mediaArea.toFixed(3);

totalGeneral+=totalArea;
});

document.getElementById("totalGeneral").innerText=totalGeneral.toFixed(3);
document.getElementById("notaFinal").innerText=((totalGeneral/600)*10).toFixed(3);
}

/* ================================================= */
/*          MODO OSCURO BASADO EN TU MODELO          */
/* ================================================= */

const darkModeToggle = document.getElementById("darkModeToggle");
const darkModeLabel = document.getElementById("darkModeLabel");

/* Activar */
function enableDarkMode(){
    document.body.classList.add("dark-mode");
    if(darkModeToggle){
        darkModeToggle.className = "theme-toggle dark-mode";
    }
    if(darkModeLabel){
        darkModeLabel.textContent = "Modo Oscuro";
    }
    localStorage.setItem("darkMode","true");
}

/* Desactivar */
function disableDarkMode(){
    document.body.classList.remove("dark-mode");
    if(darkModeToggle){
        darkModeToggle.className = "theme-toggle light-mode";
    }
    if(darkModeLabel){
        darkModeLabel.textContent = "Modo Claro";
    }
    localStorage.setItem("darkMode","false");
}

/* Alternar */
function toggleDarkMode(){
    if(document.body.classList.contains("dark-mode")){
        disableDarkMode();
    }else{
        enableDarkMode();
    }
}

/* Cargar preferencia al iniciar */
function loadDarkMode(){
    const saved = localStorage.getItem("darkMode") === "true";

    if(saved){
        enableDarkMode();
    }else{
        disableDarkMode();
    }
}

/* ================================================= */
/*                 INICIALIZACIÓN                    */
/* ================================================= */

window.addEventListener("load",()=>{
    loadDarkMode();
    calcular();
});
/* ========================= */
/* CARGAR NOTAS GUARDADAS */
/* ========================= */

function cargarNotasGuardadas(){

areas.forEach((area,aIndex)=>{

area.modulos.forEach((mod,mIndex)=>{

let key=`nota-${aIndex}-${mIndex}`;
let valor=localStorage.getItem(key);

if(valor){
let input=document.getElementById(key);
if(input){
input.value=valor;
}
}

});

});

}

if(darkModeToggle){
    darkModeToggle.addEventListener("click",toggleDarkMode);
}
</script>

</body>
</html>