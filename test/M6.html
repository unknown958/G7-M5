<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Test M√≥dulo 5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
* { box-sizing: border-box; }
body { font-family: Arial, sans-serif; background: #f2f4f7; margin:0; }
.container { max-width: 900px; margin:auto; padding:15px; }
.card { background:white; border-radius:10px; padding:20px; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
h1,h2,h3{text-align:center;}
.question{font-size:1.1rem;margin-bottom:15px;font-weight:bold;}
.options label{
    display:block;
    padding:12px;
    margin-bottom:12px;
    border-radius:8px;
    border:2px solid #ddd;
    cursor:pointer;
    transition: background 0.2s, border 0.2s;
}
.options label.selected{background:#cce5ff;border-color:#007bff;}
.options label.option-wrong{border-color:#dc3545;background:#f8d7da;}
.options label.option-correct{border-color:#28a745;background:#d4edda;}
button{padding:14px;font-size:1rem;border-radius:8px;border:none;background:#007bff;color:white;width:100%;cursor:pointer;margin-top:15px;}
button.secondary{background:#007bff;}
button.third{background:#dc3545;}
button.cuart{background:#fd7e14;}
.info{display:flex;justify-content:space-between;margin-bottom:10px;font-weight:bold;}
.final{display:none;}
.failed-question{margin-top:30px;padding-top:20px;border-top:1px solid #ddd;}
.failed-question .question-text{margin-bottom:15px;font-weight:bold;}
.saved-module{
    margin:8px 0 20px 0; 
    font-size:0.95rem; 
    padding:10px;
    border-radius:10px;
    box-shadow:0 3px 8px rgba(0,0,0,0.1);
    transition: background 0.3s;
}
.saved-module p{margin:3px 0;}
.saved-module.low{background:#f8d7da; color:#842029;}
.saved-module.mid{background:#fff3cd; color:#664d03;}
.saved-module.high{background:#d1e7dd; color:#0f5132;}
#resumeDialog {
    display: none; 
    position: fixed; 
    top: 0; left: 0; right: 0; bottom: 0; 
    background: rgba(0,0,0,0.5); 
    z-index: 9999;
    justify-content: center; 
    align-items: center;
}
#resumeDialog .card {
    max-width: 400px; 
    background: white;        
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    display: flex; 
    flex-direction: column;
    align-items: center;
    gap: 12px; 
    text-align: center;
}
#resumeDialog h2 { margin:0; }
#resumeDialog p { margin:0; font-size:1rem; }
#resumeDialog button { width: 80%; padding: 12px; font-size:1rem; border-radius:8px; border:none; cursor:pointer; transition: background 0.2s; }
#resumeDialog button#continueBtn { background:#28a745; color:white; }
#resumeDialog button#continueBtn:hover { background:#1e7e34; }
#resumeDialog button#newBtn { background:#dc3545; color:white; }
#resumeDialog button#newBtn:hover { background:#a71d2a; }
#resumeDialog button + button { margin-top: 6px; } 
#testSelection { display:none; }
#testButtons button { margin-bottom: 12px; }

/* Eliminamos el toggle switch original del modo estudio/examen */
.mode-toggle-container {
    display: none; /* Ocultamos el toggle original */
}

.mode-label {
    display: none; /* Ocultamos las etiquetas del toggle original */
}

/* Indicador de modo actual */
.current-mode-indicator {
    text-align: center;
    font-weight: bold;
    margin: 10px 0;
    padding: 8px;
    border-radius: 6px;
    background-color: #f8f9fa;
    font-size: 0.9rem;
}

.current-mode-indicator.exam {
    color: #dc3545;
    border: 2px solid #dc3545;
}

.current-mode-indicator.study {
    color: #28a745;
    border: 2px solid #28a745;
}

/* Estilos para mostrar nota en modo estudio */
.study-mode-note {
    background-color: #e7f5ff;
    border-left: 4px solid #007bff;
    padding: 10px;
    margin: 15px 0;
    border-radius: 0 8px 8px 0;
    font-weight: bold;
}

/* Di√°logo de confirmaci√≥n para salir */
#confirmDialog {
    display: none; 
    position: fixed; 
    top: 0; left: 0; right: 0; bottom: 0; 
    background: rgba(0,0,0,0.5); 
    z-index: 9999;
    justify-content: center; 
    align-items: center;
}

#confirmDialog .card {
    max-width: 400px; 
    background: white;        
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    display: flex; 
    flex-direction: column;
    align-items: center;
    gap: 12px; 
    text-align: center;
}

#confirmDialog h2 { margin:0; }
#confirmDialog p { margin:0; font-size:1rem; }
#confirmDialog button { width: 80%; padding: 12px; font-size:1rem; border-radius:8px; border:none; cursor:pointer; transition: background 0.2s; }
#confirmDialog button#confirmExitBtn { background:#dc3545; color:white; }
#confirmDialog button#confirmExitBtn:hover { background:#a71d2a; }
#confirmDialog button#cancelExitBtn { background:#6c757d; color:white; }
#confirmDialog button#cancelExitBtn:hover { background:#545b62; }

/* Estilos para los botones del test en la misma l√≠nea */
.button-row {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.button-row button {
    margin-top: 0;
    flex: 1;
}

/* Estilos para los interruptores de modo estudio/examen y modo oscuro */
.mode-toggle-group {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 140px;
    margin: 20px 0;
}

.mode-toggle-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

.mode-toggle-label {
    font-size: 0.7rem;
    color: #666;
    text-align: center;
    white-space: nowrap;
    font-weight: bold;
    margin-bottom: 5px;
}

.mode-toggle {
    position: relative;
    width: 60px;
    height: 30px;
    background-color: #f1f1f1;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    transition: background-color 0.3s;
}

.mode-toggle::after {
    content: '';
    position: absolute;
    width: 26px;
    height: 26px;
    background-color: white;
    border-radius: 50%;
    top: 2px;
    left: 2px;
    transition: transform 0.3s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
}

/* Interruptor de modo estudio/examen (izquierda) */
#studyExamToggle.study-mode {
    background-color: #28a745;
}

#studyExamToggle.study-mode::after {
    content: 'üìö';
    transform: translateX(0px);
    background-color: white;
    color: #333;
}

#studyExamToggle.exam-mode {
    background-color: #dc3545;
}

#studyExamToggle.exam-mode::after {
    content: 'üìù';
    transform: translateX(30px);
    background-color: white;
    color: #333;
}

/* Interruptor de modo oscuro (derecha) */
#darkModeToggle.light-mode {
    background-color: #ffd700;
}

#darkModeToggle.light-mode::after {
    content: '‚òÄÔ∏è';
    transform: translateX(0px);
    background-color: white;
    color: #333;
}

#darkModeToggle.dark-mode {
    background-color: #333;
}

#darkModeToggle.dark-mode::after {
    content: 'üåô';
    transform: translateX(30px);
    background-color: #555;
    color: white;
}

/* Estilos para modo oscuro */
body.dark-mode {
    background-color: #121212;
    color: #e0e0e0;
}

body.dark-mode .card {
    background-color: #1e1e1e;
    color: #e0e0e0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

body.dark-mode .question {
    color: #ffffff;
}

body.dark-mode .options label {
    background-color: #2d2d2d;
    border-color: #444;
    color: #e0e0e0;
}

body.dark-mode .options label.selected {
    background-color: #1a3d5c;
    border-color: #007bff;
}

body.dark-mode .options label.option-correct {
    background-color: #1e4620;
    border-color: #28a745;
    color: #ffffff;
}

body.dark-mode .options label.option-wrong {
    background-color: #5a1a1a;
    border-color: #dc3545;
    color: #ffffff;
}

body.dark-mode button {
    background-color: #0056b3;
}

body.dark-mode button.third {
    background-color: #c82333;
}

body.dark-mode button.cuart {
    background-color: #e06c00;
}

body.dark-mode .saved-module.low {
    background-color: #5a1a1a;
    color: #f8d7da;
}

body.dark-mode .saved-module.mid {
    background-color: #5a4a00;
    color: #fff3cd;
}

body.dark-mode .saved-module.high {
    background-color: #1e4620;
    color: #d1e7dd;
}

body.dark-mode .current-mode-indicator {
    background-color: #2d2d2d;
    border-color: #444;
}

body.dark-mode .study-mode-note {
    background-color: #1a3d5c;
    border-left-color: #007bff;
    color: #e0e0e0;
}

body.dark-mode .failed-question {
    border-top-color: #444;
}

body.dark-mode #resumeDialog .card,
body.dark-mode #confirmDialog .card {
    background-color: #2d2d2d;
    color: #e0e0e0;
}

body.dark-mode .mode-toggle-label {
    color: #aaa;
}

body.dark-mode .mode-toggle {
    background-color: #2d2d2d;
}

/* Responsive para pantallas peque√±as */
@media (max-width: 600px) {
    .mode-toggle-group {
        gap: 120px;
        flex-wrap: wrap;
    }
    
    .mode-toggle {
        width: 55px;
        height: 28px;
    }
    
    .mode-toggle::after {
        width: 24px;
        height: 24px;
    }
    
    #studyExamToggle.exam-mode::after,
    #darkModeToggle.dark-mode::after {
        transform: translateX(27px);
    }
}
</style>
</head>
<body>
<div class="container">

<div id="resumeDialog">
    <div class="card">
        <h2>üíæ Intento guardado üíæ</h2>
        <p>Se detect√≥ un intento previo guardado. ¬øDeseas continuar o empezar de nuevo?</p>
        <button id="continueBtn">Continuar</button>
        <button id="newBtn">Empezar de nuevo</button>
    </div>
</div>

<div id="confirmDialog">
    <div class="card">
        <h2>‚ö†Ô∏è Salir del test ‚ö†Ô∏è</h2>
        <p>¬øEst√°s seguro de que quieres salir? Tu progreso se guardar√° autom√°ticamente y podr√°s continuar m√°s tarde.</p>
        <button id="confirmExitBtn">S√≠, salir</button>
        <button id="cancelExitBtn">Cancelar</button>
    </div>
</div>

<div class="card" id="testSelection">
    <h1>üìö M6 üìö</h1>
    
    <!-- Grupo de interruptores uno al lado del otro -->
    <div class="mode-toggle-group">
        <!-- Interruptor de modo estudio/examen (izquierda) -->
        <div class="mode-toggle-wrapper">
            <div class="mode-toggle-label" id="studyExamLabel">Modo Estudio</div>
            <div class="mode-toggle study-mode" id="studyExamToggle"></div>
        </div>
        
        <!-- Interruptor de modo oscuro (derecha) -->
        <div class="mode-toggle-wrapper">
            <div class="mode-toggle-label" id="darkModeLabel">Modo Claro</div>
            <div class="mode-toggle light-mode" id="darkModeToggle"></div>
        </div>
    </div>
    
    <!-- Indicador del modo actual -->
    <div class="current-mode-indicator study" id="modeIndicator">
        Modo: Estudio - Ver√°s las respuestas inmediatamente
    </div>
    
    <div id="testButtons"></div>
    <button class="third" onclick="goToIndex()">Volver</button>
</div>

<div class="card" id="quizCard">
    <h1 id="themeTitle"></h1>
    <div class="info">
        <div id="progress"></div>
        <div id="timer">‚è± 00:00</div>
    </div>
    <div class="question" id="questionText"></div>
    
    <!-- Contenedor para mostrar nota en modo estudio durante el test -->
    <div id="studyNoteContainer" style="display:none;"></div>
    
    <div class="options" id="options"></div>
    
    <!-- Botones en la misma l√≠nea -->
    <div class="button-row">
        <button id="prevBtn">Anterior</button>
         <button class="third" id="backBtn">Volver</button>
        <button id="nextBtn">Siguiente</button>
       
    </div>
</div>

<div class="card final" id="finalScreen">
    <h1 id="finalTheme"></h1>
    <h2>üìä Resultado final</h2>
    <p id="summary"></p>
    <p id="finalTime"></p>
    <p id="finalNote"></p>
    <div id="failedContainer" style="display:none;"></div>
    <button class="secondary" onclick="restartTest()">Repetir test</button>
    <button class="third" onclick="backToSelection()">Volver</button>
</div>

<div class="card final" id="lastFailsScreen">
    <h1 id="lastFailsTheme"></h1>
    <h2>Preguntas incorrectas o sin responder</h2>
    <div id="lastFailsContainer"></div>
    <button class="third" onclick="backToSelection()">Volver</button>
</div>

</div>

<script>
// === Datos del test ===
const themes = [
    {
  "name": "Examen 1",
  "questions": [
  {
    "question": "Se√±ale la INCORRECTA",
    "options": [
      "Las amenazas de un mal constitutivo de delito pueden ser condicionales o no condicionales.",
      "La amenaza leve proferida por una persona a su vecino es considerada delito leve.",
      "La amenaza leve proferida por una persona a su vecino precisa para su persecuci√≥n denuncia de la persona agraviada.",
      "las amenazas de un mal no constitutivo de delito pueden ser condicionales o no condicionales, siempre que la condici√≥n no consistiere en una conducta debida. "
    ],
    "answer": "las amenazas de un mal no constitutivo de delito pueden ser condicionales o no condicionales, siempre que la condici√≥n no consistiere en una conducta debida. "
  },
  {
    "question": "Los que opusieren resistencia grave con intimidaci√≥n grave o violencia a un agente de la autoridad en el ejercicio de sus funciones incurren:",
    "options": [
      "En un delito de resistencia y en un delito de atentado si se causare resultado lesivo.",
      "En un delito de atentado ",
      "En una infracci√≥n de la Ley Org√°nica de Protecci√≥n de la Seguridad Ciudadana y en un delito de lesiones si se causare resultado lesivo",
      "En un delito de resistencia y en una infracci√≥n de la Ley Org√°nica de Protecci√≥n de la Seguridad Ciudadana"
    ],
    "answer": "En un delito de atentado "
  },
  {
    "question": "Se√±ale la respuesta CORRECTA Constituye delito leve de lesiones dolosas:",
    "options": [
      "Causar lesiones a otro que requieran paca su sanidad, adem√°s de una primera asistencia facultativa, tratamiento m√©dico o quir√∫rgico.",
      "Causar lesiones a otro que requieran para su sanidad una primera asistencia. ",
      "Causar lesiones a otro que requieran para su sanidad tratamiento m√©dico.",
      "Causar a otro una deformidad que no tenga el car√°cter de grave"
    ],
    "answer": "Causar lesiones a otro que requieran para su sanidad una primera asistencia. "
  },
  {
    "question": "La sustracci√≥n de un objeto valorado en 120 euros en un establecimiento comercial procediendo a inutilizar el dispositivo de alarma instalado en el mismo, se considera:",
    "options": [
      "Un delito de robo con fuerza en las cosas por la inutilizaci√≥n de los sistemas espec√≠ficos de alarma o guarda",
      "Un delito de hurto agravado",
      "Un delito leve de hurto agravado ",
      "Un delito de robo con fuerza en las cosas por fractura de los mecanismos de seguridad"
    ],
    "answer": "Un delito leve de hurto agravado "
  },
  {
    "question": "Se√±ale la CORRECTA:",
    "options": [
      "La resistencia leve a un agente de la autoridad en el ejercicio de sus funciones, es constitutiva de delito leve",
      "La desobediencia leve a un agente de la autoridad en el ejercicio de sus funciones es constitutiva de un delito leve",
      "La resistencia al personal de seguridad privada debidamente identificado constituye delito de resistencia.",
      "La desobediencia o la resistencia a un agente de la autoridad en el ejercicio de sus funciones, cuando no sean constitutivas de delito se sancionan como infracci√≥n grave en la LOPSC. "
    ],
    "answer": "La desobediencia o la resistencia a un agente de la autoridad en el ejercicio de sus funciones, cuando no sean constitutivas de delito se sancionan como infracci√≥n grave en la LOPSC. "
  },
  {
    "question": "Fernando F.P. encontr√≥ en el suelo del portal de su vivienda un llavero con dos llaves que identific√≥ como perteneciente a un vecino del 4¬∞ c del inmueble. Al mediod√≠a, aprovechando la absencia de su vecino, se introdujo en la vivienda haciendo uso de las llaves y se apoder√≥ de efectos por valor de 200 euros. Indica la infracci√≥n penal ante la que nos encontramos:",
    "options": [
      "Delito leve de robo",
      "Delito leve de hurto agravado por utilizaci√≥n de la llave falsa",
      "Delito de robo ",
      "Delito de robo por inutilizaci√≥n de los sistemas espec√≠ficos de guarda"
    ],
    "answer": "Delito de robo "
  },
  {
    "question": "La conducta consistente en una coacci√≥n leve entre dos personas sin ning√∫n v√≠nculo personal:",
    "options": [
      "Constituye una infracci√≥n de la LOPSC",
      "Es considerada delito leve",
      "Es considerada delito leve cuando exista violencia ",
      "Es at√≠pica."
    ],
    "answer": "Es considerada delito leve cuando exista violencia "
  },
  {
    "question": "En relaci√≥n con las drogas toxicas, estupefacientes o sustancias psicotr√≥picas, constituye infracci√≥n penal:",
    "options": [
      "La tenencia il√≠cita de tales sustancias para consumo propio, en lugares, v√≠as, establecimiento o trasportes p√∫blicos.",
      "La ejecuci√≥n la actos que promuevan, favorezcan o faciliten el consumo de tales sustancias ",
      "La ejecuci√≥n de actos de plantaci√≥n y cultivo il√≠citos de tales sustancias, para consumo propio en lugares visibles al publico",
      "El consumo particular de tales sustancias en lugares abiertos al publico"
    ],
    "answer": "La ejecuci√≥n la actos que promuevan, favorezcan o faciliten el consumo de tales sustancias "
  },
  {
    "question": "Se√±ale la INCORRECTA",
    "options": [
      "En el delito de atentado es requisito qee el sujeto pasivo se halle en el ejercicio de sus funciones o que el acto integrante del atentado se verifique con ocasi√≥n de ellas.",
      "La desobediencia grave es constitutiva de delito.",
      "la Perturbaci√≥n grave del orden con motivo de la celebraci√≥n de un espect√°culo deportivo o cultural constituye delito",
      "El delito de da√±os es un delito contra el orden p√∫blico. "
    ],
    "answer": "El delito de da√±os es un delito contra el orden p√∫blico. "
  },
  {
    "question": "Se√±ales la respuesta correcta:",
    "options": [
      "El homicidio cometido por imprudencia grave solo es perseguible mediante denuncia de la persona agraviada o de su representante legal",
      "Es delito la cooperaci√≥n al suicidio de una persona con actos no necesarios",
      "Se agrava el delito de asesinato cuando la v√≠ctima sea menor de 16 a√±os de edad ",
      "La eutanasia no se sanciona en nuestro CP"
    ],
    "answer": "Se agrava el delito de asesinato cuando la v√≠ctima sea menor de 16 a√±os de edad "
  },
  {
    "question": "La falsificaci√≥n del n√∫mero de bastidor de un veh√≠culo a motor, constituye:",
    "options": [
      "Una infracci√≥n administrativa",
      "Un delito leve de falsificaci√≥n",
      "Un delito de falsedad en documento oficial. ",
      "Ninguna de las respuestas anteriores es correcta."
    ],
    "answer": "Un delito de falsedad en documento oficial. "
  },
  {
    "question": "Se√±ale la respuesta incorrecta. Constituye un delito de robo:",
    "options": [
      "Apoderarse de un bien mueble ajeno empleando fuerza en las cosas para acceder al lugar donde este se encuentre",
      "Apoderarse de un bien mueble ajeno empleando fuerza en las cosas para abandonar el lugar donde este se encuentra",
      "Tomar un bien mueble ajeno sin la voluntad de su due√±o inutilizando los dispositivos de alarma o seguridad instalados sobre la cosa sustra√≠da ",
      "Apoderarse de un bien mueble con violencia o intimidaci√≥n en las personas"
    ],
    "answer": "Tomar un bien mueble ajeno sin la voluntad de su due√±o inutilizando los dispositivos de alarma o seguridad instalados sobre la cosa sustra√≠da "
  },
  {
    "question": "El delito de allanamiento de morada:",
    "options": [
      "Requiere que se cometa durante un per√≠odo dilatado de tiempo.",
      "Precisa que se cometa con violencia o intimidaci√≥n",
      "Precisa √°nimo de lucro por parte del sujeto activo.",
      "Se agrava si se comete con violencia o intimidaci√≥n. "
    ],
    "answer": "Se agrava si se comete con violencia o intimidaci√≥n. "
  },
  {
    "question": "Miguel M.A. sustrajo en la estaci√≥n del metro de Abando 400 metros de hilo de cobre que se encontraba a la vista, cort√°ndolo con unos alicates, siendo sorprendido cuando se dirig√≠a a venderlo a un taller pr√≥ximo, indique ante que infracci√≥n penal nos encontramos:",
    "options": [
      "Delito de robo",
      "Delito de hurto ",
      "Delito de desordenes p√∫blicos",
      "Delito de perturbaci√≥n de un servicio publico"
    ],
    "answer": "Delito de hurto "
  },
  {
    "question": "ML incumple una medida cautelar que le impide acercarse a su esposa. ¬øEn qu√© responsabilidad incurre?",
    "options": [
      "En un delito contra el orden p√∫blico",
      "En un delito de desobediencia",
      "En un delito contra la Administraci√≥n de Justicia ",
      "En ninguno de los anteriores."
    ],
    "answer": "En un delito contra la Administraci√≥n de Justicia "
  },
  {
    "question": "Se√±ale la respuesta correcta:",
    "options": [
      "La falta de respeto a la autoridad ser√° constituyente de un delito ",
      "La falta de respeto a la autoridad supone una infracci√≥n administrativa contemplada en la Ley Org√°nica de Protecci√≥n de la Seguridad Ciudadana",
      "La desobediencia grave a los agentes de la autoridad constituye una infracci√≥n administrativa contemplada en Ley Org√°nica de Protecci√≥n Ciudadana",
      "La falta de respeto a los agentes de la autoridad ser√° constitutiva de delito leve"
    ],
    "answer": "La falta de respeto a la autoridad ser√° constituyente de un delito "
  },
  {
    "question": "Un ciudadano se presenta en la comisar√≠a de Zum√°rraga y denuncia la sustracci√≥n de su bicicleta manifestando que la dej√≥ candada a un √°rbol y que al salir de un establecimiento comercial pr√≥ximo ya no estaba y que el candado fracturado se encontraba en el suelo. Comprobado el hecho se constata que no existi√≥ tal sustracci√≥n. Se√±ale ante qu√© infracci√≥n penal nos encontramos:",
    "options": [
      "Un delito leve de acusaci√≥n falsa.",
      "Un delito de denuncia falsa,",
      "Un delito de simulaci√≥n de delito. ",
      "Un delito de realizaci√≥n arbitraria del propio derecho."
    ],
    "answer": "Un delito de simulaci√≥n de delito. "
  },
  {
    "question": "El delito de omisi√≥n del deber de socorro:",
    "options": [
      "Requiere que el sujeto activo sea funcionario",
      "Resulta agravado cuando la victima lo sea por accidente ocasionado por el que omiti√≥ el auxilio ",
      "Requiere como comportamiento t√≠pico el no socorrer a una persona que requiera cualquier tipo de ayuda",
      "Ante la comisi√≥n por imprudencia siempre que sea grave"
    ],
    "answer": "Resulta agravado cuando la victima lo sea por accidente ocasionado por el que omiti√≥ el auxilio "
  },
  {
    "question": "El que a sabiendas de la comisi√≥n de un delito, interviene con posterioridad ayudando al responsable a eludir la investigaci√≥n o sustraerse a su busca y captura incurre en un delito de encubrimiento, siempre que:",
    "options": [
      "El hecho encubierto se hubiere cometido con violencia.",
      "El hecho sea constitutivo de un delito de homicidio. ",
      "El hecho encubierto sea cometido con fuerza en las cosas.",
      "El hecho encubierto sea de un delito menos grave."
    ],
    "answer": "El hecho sea constitutivo de un delito de homicidio. "
  },
  {
    "question": "Manu L.C.. sustrajo un veh√≠culo a motor forzando su cerradura en la gasolinera de la calle Zabalgana de Vitoria-Gasteiz, traslad√°ndose a continuaci√≥n con el indicado veh√≠culo a Agurain, dej√°ndolo en un aparcamiento a la entrada de la localidad. ¬øante que delito nos encontramos?",
    "options": [
      "Delito de hurto de veh√≠culos a motor",
      "Delito de robo de uso de veh√≠culo a motor ",
      "Delito de hurto de uso de veh√≠culo a motor",
      "Delito de robo de veh√≠culo a motor"
    ],
    "answer": "Delito de robo de uso de veh√≠culo a motor "
  },
  {
    "question": "Cu√°l de las siguientes conductas NO precisa denuncia para su persecuci√≥n:",
    "options": [
      "Delito de homicidio causado por imprudencia menos grave",
      "Delito consistente en dejar de pagar cualquier prestaci√≥n econ√≥mica establecida, en favor del c√≥nyuge, en un convenio judicial en un supuesto de divorcio.",
      "Delito de detenci√≥n ilegal. ",
      "Delito leve de coacciones entre particulares"
    ],
    "answer": "Delito de detenci√≥n ilegal. "
  },
  {
    "question": "El delito de trata de seres humanos:",
    "options": [
      "Necesariamente debe cometerse con violencia o intimidaci√≥n",
      "Tiene necesariamente como finalidad la explotaci√≥n sexual",
      "Puede cometerse abusando de una situaci√≥n de superioridad o de necesidad ",
      "Necesariamente debe cometerse con enga√±o"
    ],
    "answer": "Puede cometerse abusando de una situaci√≥n de superioridad o de necesidad "
  },
  {
    "question": "Kepa prest√≥ a su amigo Jon un ordenador durante un mes. Finalizado dicho plazo, Kepa le pide a su amigo que se lo devuelva, manifestando Jon que no sabe nada de ning√∫n ordenador y que a √©l no le ha prestado nada. ¬øEn qu√© responsabilidad incurre Jon?",
    "options": [
      "Delito de estafa",
      "Delito de apropiaci√≥n indebida ",
      "Delito de hurto",
      "Delito de estafa agravado por abuso de confianza."
    ],
    "answer": "Delito de apropiaci√≥n indebida "
  },
  {
    "question": "Se√±ale la respuesta incorrecta:",
    "options": [
      "En el delito de acoso escolar el atentado a la integridad moral debe ser grave",
      "El delito de tortura debe tener como finalidad la obtenci√≥n de una confesi√≥n ",
      "El delito de acoso inmobiliario tiene por objeto impedir el leg√≠timo disfrute de la vivienda",
      "Las conductas de acoso moral se encuadran en el CP dentro de los delitos de torturas y otros delitos contra la integridad moral"
    ],
    "answer": "El delito de tortura debe tener como finalidad la obtenci√≥n de una confesi√≥n "
  },
  {
    "question": "El delito de realizaci√≥n arbitraria del propio derecho:",
    "options": [
      "Es un delito contra el patrimonio.",
      "Puede cometerse con fuerza en las cosas. ",
      "Necesariamente debe cometerse con violencia sobre las personas.",
      "No precisa ni del empleo de fuerza en las cosas ni de violencia o intimidaci√≥n en las personas."
    ],
    "answer": "Puede cometerse con fuerza en las cosas. "
  },
  {
    "question": "Se√±ale la respuesta incorrecta:",
    "options": [
      "La conducta de no socorrer a una persona que se halle desamparada y en peligro manifiesto y grave cuando pudiera hacerlo sin riesgo propio ni de terceros:",
      "Es un delito leve",
      "Se trata de un delito de denegaci√≥n de auxilio ",
      "Se trata de un delito de omisi√≥n del deber de socorro",
      "Necesariamente ha de ser dolosa."
    ],
    "answer": "Se trata de un delito de denegaci√≥n de auxilio "
  },
  {
    "question": "Quien afirme falsamente una situaci√≥n de peligro para la comunidad a consecuencia de la cual es necesario prestar auxilio a otro, Y con ello se provocare la movilizaci√≥n de los servicios de polic√≠a, asistencia o salvamento, incurre en:",
    "options": [
      "Un delito contra la Administraci√≥n del Estado",
      "Un delito contra el Orden P√∫blico ",
      "Un delito contra la administraci√≥n de Justicia",
      "Una infracci√≥n administrativa contemplada en la LOPSC."
    ],
    "answer": "Un delito contra el Orden P√∫blico "
  },
  {
    "question": "Se√±ale la respuesta correcta:",
    "options": [
      "El acusado por delito de calumnia e injuria quedar√° exento de toda responsabilidad probando el hecho que hubiere imputado",
      "Las injurias son siempre constitutivas de delito leve",
      "El delito de calumnia consiste en atribuir falsamente a una persona un hecho constitutivo de delito con conocimiento de su falsedad o con temerario desprecio a la verdad ",
      "Ninguna de las respuestas anteriores es correcta"
    ],
    "answer": "El delito de calumnia consiste en atribuir falsamente a una persona un hecho constitutivo de delito con conocimiento de su falsedad o con temerario desprecio a la verdad "
  },
  {
    "question": "El lunes MA se persona en comisaria, manifestando que tiene la custodia de su hijo menos de edad y que el fin de semana, en cumplimiento del convenio judicial, su hijo menor de edad estuvo pasando el fin de semana con su padre TL del que ella se encuentra separada. El domingo por la noche no restituy√≥ a su hijo a su domicilio. Los vecinos le han contado que el domingo por la tarde vieron como TL se introduc√≠a en su veh√≠culo provisto de varias maletas en compa√±√≠a de su hijo y les manifest√≥ que se iban de viaje. Ante qu√© infracci√≥n nos encontramos:",
    "options": [
      "Un delito de inducci√≥n al abandono del domicilio familiar.",
      "Un delito de detenci√≥n ilegal",
      "Un delito de sustracci√≥n de menores",
      "Un delito de secuestro. "
    ],
    "answer": "Un delito de secuestro. "
  },
  {
    "question": "La conducta consistente en da√±ar las conducciones o transmisiones de agua, gas o electricidad para las poblaciones, interrumpiendo o alterando gravemente el suministro o servicio es t√≠pica del delito de:",
    "options": [
      "Estragos",
      "Atentado",
      "Da√±os agravados",
      "Desordenes p√∫blicos "
    ],
    "answer": "Desordenes p√∫blicos "
  },
  {
    "question": "El que, con √°nimo de lucro, y vali√©ndose de alguna manipulaci√≥n inform√°tica o artificio semejante consiga la transferencia de un dinero en perjuicio de tercero, comete:",
    "options": [
      "Delito de estafa ",
      "Delito de robo con fuerza en las cosas.",
      "Delito de apropiaci√≥n indebida.",
      "No comete delito."
    ],
    "answer": "Delito de estafa "
  },
  {
    "question": "Cu√°l de las siguientes circunstancias no agrava el delito de atentado, en virtud de lo dispuesto en el C.P.:",
    "options": [
      "Cuando se haga uso de armas u otros objetos peligrosos",
      "Cuando el acto de violencia ejecutado resulte potencialmente peligroso para la vida de las personas o pueda causar lesiones graves",
      "Cuando se acometa haciendo uso de un veh√≠culo a motor",
      "Cuando los hechos sean particularmente degradantes o vejatorios "
    ],
    "answer": "Cuando los hechos sean particularmente degradantes o vejatorios "
  },
  {
    "question": "La caracter√≠stica esencial de los delincuentes habituales sociales, es:",
    "options": [
      "Sus actividades s√≥lo ser√°n escasamente planificadas, actuando de forma individual, o en grupos reducidos. ",
      "Tienen conocimientos t√©cnicos y utilizan los medios necesarios para cada caso.",
      "Son aquellas personas que, sin historial delictivo, en un momento puntual y ante la necesidad de obtener dinero r√°pido, realizan un robo.",
      "trabajan en grupos organizados especializados en la comisi√≥n de hurtos en aparcamientos de grandes superficies comerciales."
    ],
    "answer": "Sus actividades s√≥lo ser√°n escasamente planificadas, actuando de forma individual, o en grupos reducidos. "
  },
  {
    "question": "Los individuos que se dedican a la adquisici√≥n de objetos robados a precios muy inferiores a su valor real de denominan",
    "options": [
      "Santeros",
      "Nazaremos",
      "Peristas ",
      "Loneros"
    ],
    "answer": "Peristas "
  },
  {
    "question": "Hablando de cerraduras, si nos referimos a la apertura de cilindros de forma limpia, sin rotura mediante la percusi√≥n de pitones a trav√©s de llaves manipuladas para ello se denomina:",
    "options": [
      "Impresioning",
      "Saturaci√≥n",
      "Bumping ",
      "Magic Key"
    ],
    "answer": "Bumping "
  },
  {
    "question": "En el Timo de la Estampita:",
    "options": [
      "El dinero tintado es sacado de un pa√≠s y que mediante unos productos qu√≠micos se vuelven de curso legal",
      "El timador se gana primero la confianza de la empresa proveedora haciendo algunos peque√±os pedidos.",
      "El estafador lleva consigo un billete de loter√≠a presuntamente premiado",
      "El estafador lleva consigo un sobre lleno de billetes, a los que no da ninguna importancia "
    ],
    "answer": "El estafador lleva consigo un sobre lleno de billetes, a los que no da ninguna importancia "
  },
  {
    "question": "¬ø Cu√°l es el software malicioso que al infectar un equipo le da al ciberdelincuente la capacidad de bloquear un dispositivo desde una ubicaci√≥n remota y cifrar archivos quitando el control de toda la informaci√≥n y datos almacenados?",
    "options": [
      "Phishing",
      "Spyware",
      "Scalping",
      "Ransomware "
    ],
    "answer": "Ransomware "
  },
  {
    "question": "El relaci√≥n a la organizaci√≥n y estructura de las bandas dedicadas al trafico il√≠cito de veh√≠culos, el organigrama se desglosa en los siguientes componentes:",
    "options": [
      "Jefe de la banda, mec√°nicos ajustadores, ojeadores, robacoches y conductores, pasadores o correos",
      "Jefe de la banda, falsificador, retroqueladores o maquilladores; robacoches y conductores, pasadores o correos",
      "Jefe de la banda, falsificadores, retroqueladores o maquilladores, ojeadores, robacoches y conductores, pasadores o correos ",
      "Jefe de la banda, falsificadores de documentaci√≥n del veh√≠culo, ojeadores, robacoches y conductores"
    ],
    "answer": "Jefe de la banda, falsificadores, retroqueladores o maquilladores, ojeadores, robacoches y conductores, pasadores o correos "
  },
  {
    "question": "¬øQu√© suele designar el identificador VDS ( Descripci√≥n del modelo del veh√≠culo)?",
    "options": [
      "Suele designar el n¬∞ de serie de fabricaci√≥n de cada veh√≠culo",
      "Suele designar la serie del autom√≥vil, el tipo de carrocer√≠a y la motorizaci√≥n. ",
      "Suele designar el fabricante del veh√≠culo.",
      "Suele designar el continente y el pa√≠s de fabricaci√≥n."
    ],
    "answer": "Suele designar la serie del autom√≥vil, el tipo de carrocer√≠a y la motorizaci√≥n. "
  },
  {
    "question": "Existen varios tipos de impresi√≥n entre los cuales se encuentra la tipograf√≠a. ¬øqu√© tipo de relieve produce este sistema de impresi√≥n?",
    "options": [
      "La tipograf√≠a produce relieve en positivo ",
      "La tipograf√≠a produce relieve en negativo",
      "La tipograf√≠a no produce relieve ya que es plana",
      "Ninguna de las anteriores respuestas es correcta"
    ],
    "answer": "La tipograf√≠a produce relieve en positivo "
  },
  {
    "question": "El delito de detenci√≥n ilegal resulta atenuado:",
    "options": [
      "Si el autor de la detenci√≥n ilegal deja en libertad al encerrado o detenido tras haber logrado su prop√≥sito.",
      "Si el autor de la detenci√≥n ilegal exige una condici√≥n para poner en libertad a la v√≠ctima.",
      "Cuando el autor de la detenci√≥n d√© raz√≥n del paradero de la v√≠ctima aunque no la deje en libertad.",
      "Si se pone en libertad a la v√≠ctima dentro de los 3 d√≠as de su detenci√≥n por voluntad del culpable y sin haber logrado su prop√≥sito. "
    ],
    "answer": "Si se pone en libertad a la v√≠ctima dentro de los 3 d√≠as de su detenci√≥n por voluntad del culpable y sin haber logrado su prop√≥sito. "
  },
  {
    "question": "Se√±ale la afirmaci√≥n correcta",
    "options": [
      "Para la comisi√≥n de un delito de allanamiento de morada es indispensable el empleo de violencia o intimidaci√≥n",
      "Es delito de usurpaci√≥n la ocupaci√≥n sin la autorizaci√≥n debida de un inmueble que constituya morada",
      "Es delito de usurpaci√≥n la ocupaci√≥n sin la autorizaci√≥n debida, de un inmueble que no constituya morada ",
      "En el delito de allanamiento y usurpaci√≥n el bien jur√≠dico protegido es el patrimonio individual"
    ],
    "answer": "Es delito de usurpaci√≥n la ocupaci√≥n sin la autorizaci√≥n debida, de un inmueble que no constituya morada "
  },
  {
    "question": "Cuando hablamos de medidas de seguridad ¬ø a qu√© nos referimos con el t√©rmino planchetes?",
    "options": [
      "Es la denominaci√≥n que da la F√°brica Nacional de Moneda y Timbre a las planchas utilizadas para la confecci√≥n de billetes de euro",
      "Los planchetes ser√°n introducidos en el momento de fabricaci√≥n del papel, son de composici√≥n sint√©tica y pueden de forma variables. La disposici√≥n es en masa (aleatoria ) o en banda, ",
      "Los planchetes se introducen al finalizar el proceso de impresi√≥n, para ello se utilizan planchas de impresi√≥n. La disposici√≥n es en masa (aleatoria. o en banda.",
      "Ninguna de las anteriores respuestas es correcta."
    ],
    "answer": "Los planchetes ser√°n introducidos en el momento de fabricaci√≥n del papel, son de composici√≥n sint√©tica y pueden de forma variables. La disposici√≥n es en masa (aleatoria ) o en banda, "
  }
]
},
{
  "name": "Examen 2",
  "questions": [
  {
    "question": "Se√±ala lo que NO es caracter√≠stico del modus operandi del carterista:",
    "options": [
      "Act√∫a en zonas de gran afluencia",
      "Selecciona previamente a la v√≠ctima",
      "Aprovecha empujones o distracciones",
      "Act√∫a sin seleccionar lugar ni v√≠ctima "
    ],
    "answer": "Act√∫a sin seleccionar lugar ni v√≠ctima "
  },
  {
    "question": "El delito de atentado contra agente de la autoridad requiere:",
    "options": [
      "Falta de respeto grave",
      "Desobediencia reiterada",
      "Violencia, intimidaci√≥n grave o resistencia grave contra agente en funciones ",
      "Negativa a identificarse"
    ],
    "answer": "Violencia, intimidaci√≥n grave o resistencia grave contra agente en funciones "
  },
  {
    "question": "El acordonamiento policial tiene como finalidad principal:",
    "options": [
      "Preservar indicios",
      "Facilitar la labor policial",
      "Proteger a las personas de una zona de riesgo ",
      "Garantizar la cadena de custodia"
    ],
    "answer": "Proteger a las personas de una zona de riesgo "
  },
  {
    "question": "Entrar en un garaje abierto, apoderarse de objetos y forzar la salida cerrada constituye:",
    "options": [
      "Hurto",
      "Hurto agravado",
      "Robo con fuerza ",
      "Allanamiento"
    ],
    "answer": "Robo con fuerza "
  },
  {
    "question": "Se considera persona encausada:",
    "options": [
      "Quien formula denuncia",
      "Contra quien se dirige el procedimiento penal ",
      "Quien comparece como testigo",
      "El perjudicado"
    ],
    "answer": "Contra quien se dirige el procedimiento penal "
  },
  {
    "question": "Sustancia con potente efecto empat√≥geno:",
    "options": [
      "Anfetamina",
      "MDMA ",
      "LSD",
      "Ketamina"
    ],
    "answer": "MDMA "
  },
  {
    "question": "En el argot, ‚Äúpitxu‚Äù hace referencia a:",
    "options": [
      "Hero√≠na",
      "MDMA",
      "Sulfato de anfetamina ",
      "Coca√≠na base"
    ],
    "answer": "Sulfato de anfetamina "
  },
  {
    "question": "Sistema que genera alerta al salir un veh√≠culo de una zona delimitada:",
    "options": [
      "Inmovilizador electr√≥nico",
      "GPS pasivo",
      "Geovalla ",
      "Tac√≥grafo"
    ],
    "answer": "Geovalla "
  },
  {
    "question": "En la ri√±a tumultuaria, para imputar el subtipo agravado es necesario que:",
    "options": [
      "El arma llegue a usarse",
      "El arma sea blanca",
      "Los part√≠cipes conozcan su porte ",
      "Existan lesiones"
    ],
    "answer": "Los part√≠cipes conozcan su porte "
  },
  {
    "question": "Los indicios que requieren an√°lisis f√≠sico o biol√≥gico son:",
    "options": [
      "Gen√©ricos",
      "Accidentales",
      "Determinados ",
      "Circunstanciales"
    ],
    "answer": "Determinados "
  },
  {
    "question": "La tenencia de cartucher√≠a est√° limitada:",
    "options": [
      "A 50 cartuchos",
      "A 100 cartuchos",
      "A lo establecido reglamentariamente ",
      "No tiene l√≠mite"
    ],
    "answer": "A lo establecido reglamentariamente "
  },
  {
    "question": "Antes de prestar declaraci√≥n es recomendable:",
    "options": [
      "Repasar el atestado",
      "Memorizar los hechos",
      "Realizar respiraciones controladas ",
      "Evitar beber agua"
    ],
    "answer": "Realizar respiraciones controladas "
  },
  {
    "question": "M√©todo de robo con fuerza que deja restos fibrosos en la cerradura:",
    "options": [
      "Impresi√≥n",
      "Bumping",
      "Saturaci√≥n ",
      "Ganzuado"
    ],
    "answer": "Saturaci√≥n "
  },
  {
    "question": "En el juicio oral, el testimonio debe:",
    "options": [
      "Ajustarse al atestado",
      "Incluir valoraciones personales",
      "Aportar informaci√≥n concreta y objetiva ",
      "Ser extenso"
    ],
    "answer": "Aportar informaci√≥n concreta y objetiva "
  },
  {
    "question": "El ‚Äúabrazo solidario‚Äù se emplea principalmente con:",
    "options": [
      "Menores",
      "V√≠ctimas de edad avanzada ",
      "Personas agresivas",
      "Detenidos"
    ],
    "answer": "V√≠ctimas de edad avanzada "
  },
  {
    "question": "Hallar un objeto perdido y no devolverlo constituye:",
    "options": [
      "Hurto",
      "Robo",
      "Apropiaci√≥n indebida ",
      "Estafa"
    ],
    "answer": "Apropiaci√≥n indebida "
  },
  {
    "question": "El procedimiento penal puede iniciarse mediante:",
    "options": [
      "Denuncia √∫nicamente",
      "Querella",
      "Denuncia, oficio o atestado ",
      "Resoluci√≥n administrativa"
    ],
    "answer": "Denuncia, oficio o atestado "
  },
  {
    "question": "Un pu√±al se define como:",
    "options": [
      "Arma blanca de un solo filo",
      "Arma autom√°tica",
      "Arma de doble filo, puntiaguda y ‚â§11 cm ",
      "Cuchillo dom√©stico"
    ],
    "answer": "Arma de doble filo, puntiaguda y ‚â§11 cm "
  },
  {
    "question": "Se instruye atestado:",
    "options": [
      "Solo en delitos con detenido",
      "En delitos p√∫blicos siempre y privados a requerimiento ",
      "Solo por orden judicial",
      "√önicamente en flagrancia"
    ],
    "answer": "En delitos p√∫blicos siempre y privados a requerimiento "
  },
  {
    "question": "El plazo m√°ximo general de detenci√≥n es:",
    "options": [
      "24 horas",
      "48 horas",
      "72 horas ",
      "96 horas"
    ],
    "answer": "72 horas "
  },
  {
    "question": "Los establecimientos ‚Äúcompro oro‚Äù deben comunicar transacciones:",
    "options": [
      "Diariamente",
      "Mensualmente",
      "Semanalmente ",
      "Trimestralmente"
    ],
    "answer": "Semanalmente "
  },
  {
    "question": "El delito de exhibicionismo se caracteriza por:",
    "options": [
      "Mostrar im√°genes obscenas",
      "Actos de car√°cter sexual ante menores o personas vulnerables ",
      "Comentarios de √≠ndole sexual",
      "Tocamientos"
    ],
    "answer": "Actos de car√°cter sexual ante menores o personas vulnerables "
  },
  {
    "question": "Los derechos de la v√≠ctima deben informarse:",
    "options": [
      "Tras la denuncia",
      "En fase judicial",
      "Desde el primer contacto con la autoridad ",
      "A petici√≥n expresa"
    ],
    "answer": "Desde el primer contacto con la autoridad "
  },
  {
    "question": "Forzar un elemento para recuperar algo propio prestado es:",
    "options": [
      "Robo",
      "Hurto",
      "Aplicaci√≥n arbitraria del propio derecho ",
      "Coacciones"
    ],
    "answer": "Aplicaci√≥n arbitraria del propio derecho "
  },
  {
    "question": "Sustraer un ciclomotor y devolverlo a las 24 horas:",
    "options": [
      "Hurto",
      "Robo",
      "Hurto de uso ",
      "Apropiaci√≥n indebida"
    ],
    "answer": "Hurto de uso "
  },
  {
    "question": "Apoderarse de una tarjeta bancaria para usarla:",
    "options": [
      "Hurto",
      "Robo",
      "Estafa ",
      "Falsedad"
    ],
    "answer": "Estafa "
  },
  {
    "question": "No es un arma de guerra:",
    "options": [
      "Fusil autom√°tico",
      "Ametralladora",
      "Lanzacohetes",
      "Pistola semiautom√°tica "
    ],
    "answer": "Pistola semiautom√°tica "
  },
  {
    "question": "La tenencia en domicilio de navaja no autom√°tica >11 cm:",
    "options": [
      "Es delito",
      "Es falta",
      "Es infracci√≥n administrativa",
      "Es l√≠cita "
    ],
    "answer": "Es l√≠cita "
  },
  {
    "question": "Exigir dinero por la liberaci√≥n de una menor que escapa:",
    "options": [
      "Detenci√≥n ilegal",
      "Extorsi√≥n",
      "Secuestro agravado ",
      "Coacciones"
    ],
    "answer": "Secuestro agravado "
  },
  {
    "question": "Crear perfiles falsos con fines sexuales causando grave perjuicio:",
    "options": [
      "Injurias",
      "Amenazas",
      "Coacciones",
      "Acoso "
    ],
    "answer": "Acoso "
  },
  {
    "question": "La sumisi√≥n qu√≠mica en agresi√≥n sexual opera como:",
    "options": [
      "Tipo b√°sico",
      "Atenuante",
      "Agravante ",
      "Delito aut√≥nomo"
    ],
    "answer": "Agravante "
  },
  {
    "question": "Menor que accede con DNI de su hermano mayor:",
    "options": [
      "Usurpaci√≥n",
      "Estafa",
      "Falsedad documental ",
      "Intrusismo"
    ],
    "answer": "Falsedad documental "
  },
  {
    "question": "En el acoso escolar NO es requisito:",
    "options": [
      "Reiteraci√≥n",
      "Desequilibrio de poder",
      "Intencionalidad",
      "Que ocurra dentro del centro "
    ],
    "answer": "Que ocurra dentro del centro "
  },
  {
    "question": "Conducta subsidiaria del deber de socorro:",
    "options": [
      "Abandonar el lugar",
      "Grabar los hechos",
      "Solicitar auxilio ajeno ",
      "No intervenir"
    ],
    "answer": "Solicitar auxilio ajeno "
  },
  {
    "question": "El ofrecimiento de acciones y derechos se dirige a:",
    "options": [
      "El investigado",
      "El testigo",
      "La v√≠ctima ",
      "El detenido"
    ],
    "answer": "La v√≠ctima "
  },
  {
    "question": "El certificado de denuncia lo firma:",
    "options": [
      "Instructor y denunciante",
      "Secretario judicial",
      "Instructor ",
      "Juez"
    ],
    "answer": "Instructor "
  },
  {
    "question": "La entrada en domicilio por la autoridad requiere:",
    "options": [
      "Orden de detenci√≥n",
      "Urgencia policial",
      "Consentimiento, flagrancia u orden judicial ",
      "Comunicaci√≥n previa"
    ],
    "answer": "Consentimiento, flagrancia u orden judicial "
  },
  {
    "question": "Agresi√≥n a polic√≠a de paisano antes de identificarse:",
    "options": [
      "Atentado",
      "Resistencia",
      "Lesiones leves ",
      "Desobediencia"
    ],
    "answer": "Lesiones leves "
  },
  {
    "question": "Las personas presentes en un delito:",
    "options": [
      "Deben declarar",
      "Pueden marcharse sin m√°s",
      "Deben identificarse si se les requiere ",
      "Quedan detenidas"
    ],
    "answer": "Deben identificarse si se les requiere "
  },
  {
    "question": "VG: juzgado competente es el del lugar:",
    "options": [
      "Del agresor",
      "De la denuncia",
      "Del domicilio de la v√≠ctima en el momento del hecho ",
      "De la detenci√≥n"
    ],
    "answer": "Del domicilio de la v√≠ctima en el momento del hecho "
  },
  {
    "question": "Excepci√≥n veritatis en injurias a funcionario:",
    "options": [
      "Nunca procede",
      "Solo con testigos",
      "Si los hechos imputados son ciertos ",
      "Solo en v√≠a administrativa"
    ],
    "answer": "Si los hechos imputados son ciertos "
  },
  {
    "question": "El detenido tiene derecho a:",
    "options": [
      "Acceso total al atestado",
      "No acceder a nada",
      "Acceder a elementos esenciales para impugnar la detenci√≥n ",
      "Ver diligencias futuras"
    ],
    "answer": "Acceder a elementos esenciales para impugnar la detenci√≥n "
  },
  {
    "question": "Regalar droga en lugar no abierto al p√∫blico:",
    "options": [
      "Consumo compartido",
      "Infracci√≥n administrativa",
      "Delito de tr√°fico ",
      "Delito leve"
    ],
    "answer": "Delito de tr√°fico "
  },
  {
    "question": "Derivado semisint√©tico del opio:",
    "options": [
      "Morfina",
      "Code√≠na",
      "Hero√≠na ",
      "Metadona"
    ],
    "answer": "Hero√≠na "
  },
  {
    "question": "La criminal√≠stica de campo comprende:",
    "options": [
      "An√°lisis de laboratorio",
      "Autopsias",
      "Actuaciones en el lugar de los hechos ",
      "Perfilaci√≥n"
    ],
    "answer": "Actuaciones en el lugar de los hechos "
  },
  {
    "question": "El asesinato por imprudencia leve es:",
    "options": [
      "Delito grave",
      "Delito menos grave",
      "Delito leve",
      "At√≠pico "
    ],
    "answer": "At√≠pico "
  },
  {
    "question": "La tenencia de armas por piezas:",
    "options": [
      "No es punible",
      "Es infracci√≥n leve",
      "Constituye delito de dep√≥sito ",
      "Solo administrativa"
    ],
    "answer": "Constituye delito de dep√≥sito "
  },
  {
    "question": "Obstaculizar la v√≠a alterando la paz p√∫blica:",
    "options": [
      "Coacciones",
      "Resistencia",
      "Des√≥rdenes p√∫blicos ",
      "Reuni√≥n il√≠cita"
    ],
    "answer": "Des√≥rdenes p√∫blicos "
  },
  {
    "question": "Lesiones por imprudencia con fractura y amputaci√≥n:",
    "options": [
      "Un delito",
      "Un delito grave",
      "Dos delitos leves",
      "Dos delitos leves por imprudencia "
    ],
    "answer": "Dos delitos leves por imprudencia "
  },
  {
    "question": "Amenazas condicionales de mal constitutivo de delito:",
    "options": [
      "Dependen de la condici√≥n",
      "Solo si es il√≠cita",
      "No son punibles",
      "La condici√≥n es irrelevante "
    ],
    "answer": "La condici√≥n es irrelevante "
  },
  {
    "question": "Huellas por adici√≥n se producen cuando:",
    "options": [
      "Se presiona una superficie limpia",
      "Se elimina polvo",
      "Se deposita una sustancia previamente adherida ",
      "Se talla el soporte"
    ],
    "answer": "Se deposita una sustancia previamente adherida "
  },
  {
    "question": "Primer alcaloide aislado del opio:",
    "options": [
      "Code√≠na",
      "Hero√≠na",
      "Morfina ",
      "Metadona"
    ],
    "answer": "Morfina "
  },
  {
    "question": "Acceder con violencia a local abierto al p√∫blico en horario:",
    "options": [
      "Robo",
      "Allanamiento ",
      "Hurto",
      "Coacciones"
    ],
    "answer": "Allanamiento "
  },
  {
    "question": "Indicar d√≥nde vender lo robado a cambio de beneficio:",
    "options": [
      "Encubrimiento",
      "Cooperaci√≥n necesaria",
      "Receptaci√≥n ",
      "Estafa"
    ],
    "answer": "Receptaci√≥n "
  }
]
},
    ]

// Variables
let theme=null,index=0,correct=0,incorrect=0,startTime=Date.now(),answers=[],timerInterval;
let mode = "study"; // Valor por defecto

// DOM
const themeTitle=document.getElementById("themeTitle");
const questionText=document.getElementById("questionText");
const optionsDiv=document.getElementById("options");
const nextBtn=document.getElementById("nextBtn");
const prevBtn=document.getElementById("prevBtn");
const backBtn=document.getElementById("backBtn");
const progress=document.getElementById("progress");
const timer=document.getElementById("timer");
const quizCard=document.getElementById("quizCard");
const finalScreen=document.getElementById("finalScreen");
const lastFailsScreen=document.getElementById("lastFailsScreen");
const summary=document.getElementById("summary");
const finalTime=document.getElementById("finalTime");
const finalNote=document.getElementById("finalNote");
const finalTheme=document.getElementById("finalTheme");
const lastFailsTheme=document.getElementById("lastFailsTheme");
const failedContainer=document.getElementById("failedContainer");
const lastFailsContainer=document.getElementById("lastFailsContainer");
const resumeDialog=document.getElementById("resumeDialog");
const continueBtn=document.getElementById("continueBtn");
const newBtn=document.getElementById("newBtn");
const testSelection=document.getElementById("testSelection");
const testButtonsDiv=document.getElementById("testButtons");
const modeIndicator=document.getElementById("modeIndicator");
const studyNoteContainer=document.getElementById("studyNoteContainer");
const confirmDialog=document.getElementById("confirmDialog");
const confirmExitBtn=document.getElementById("confirmExitBtn");
const cancelExitBtn=document.getElementById("cancelExitBtn");

// Nuevos elementos para los interruptores
const studyExamToggle = document.getElementById("studyExamToggle");
const studyExamLabel = document.getElementById("studyExamLabel");
const darkModeToggle = document.getElementById("darkModeToggle");
const darkModeLabel = document.getElementById("darkModeLabel");

// Funciones para el toggle de modo estudio/examen
function toggleStudyExamMode() {
    if (mode === "study") {
        setMode("exam");
    } else {
        setMode("study");
    }
}

function setMode(newMode) {
    mode = newMode;
    
    // Guardar el modo seleccionado en localStorage
    localStorage.setItem("testMode", mode);
    
    // Actualizar interruptor estudio/examen visualmente
    if (mode === "exam") {
        studyExamToggle.className = "mode-toggle exam-mode";
        studyExamLabel.textContent = "Modo Examen";
        modeIndicator.textContent = "Modo: Examen - Solo ver√°s las respuestas al final";
        modeIndicator.className = "current-mode-indicator exam";
    } else {
        studyExamToggle.className = "mode-toggle study-mode";
        studyExamLabel.textContent = "Modo Estudio";
        modeIndicator.textContent = "Modo: Estudio - Ver√°s las respuestas inmediatamente";
        modeIndicator.className = "current-mode-indicator study";
    }
    
    // Reconstruir los botones de test
    buildTestButtons();
}

// Cargar el modo guardado del localStorage al iniciar
function loadSavedMode() {
    const savedMode = localStorage.getItem("testMode");
    if (savedMode === "study" || savedMode === "exam") {
        setMode(savedMode);
    } else {
        setMode("study"); // Valor por defecto si no hay nada guardado
    }
}

// Funciones para el modo oscuro
function initDarkMode() {
    // Cargar preferencia de modo oscuro
    const darkMode = localStorage.getItem("darkMode") === "true";
    
    if (darkMode) {
        enableDarkMode();
    } else {
        disableDarkMode();
    }
    
    // Configurar eventos para los interruptores
    studyExamToggle.addEventListener("click", toggleStudyExamMode);
    darkModeToggle.addEventListener("click", toggleDarkMode);
    
    // Tambi√©n permitir arrastre como el otro toggle
    setupToggleDrag(studyExamToggle, toggleStudyExamMode);
    setupToggleDrag(darkModeToggle, toggleDarkMode);
}

function toggleDarkMode() {
    if (document.body.classList.contains("dark-mode")) {
        disableDarkMode();
    } else {
        enableDarkMode();
    }
}

function enableDarkMode() {
    document.body.classList.add("dark-mode");
    darkModeToggle.className = "mode-toggle dark-mode";
    darkModeLabel.textContent = "Modo Oscuro";
    localStorage.setItem("darkMode", "true");
}

function disableDarkMode() {
    document.body.classList.remove("dark-mode");
    darkModeToggle.className = "mode-toggle light-mode";
    darkModeLabel.textContent = "Modo Claro";
    localStorage.setItem("darkMode", "false");
}

// Funci√≥n gen√©rica para arrastre en toggles
function setupToggleDrag(toggleElement, toggleFunction) {
    let dragStart = 0;
    let isDragging = false;
    
    toggleElement.addEventListener('touchstart', (e) => {
        dragStart = e.touches[0].clientX;
        isDragging = true;
        e.preventDefault();
    }, {passive: false});
    
    toggleElement.addEventListener('touchmove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
    }, {passive: false});
    
    toggleElement.addEventListener('touchend', (e) => {
        if (!isDragging) return;
        
        const dragEnd = e.changedTouches[0].clientX;
        const deltaX = dragEnd - dragStart;
        
        // Si se arrastra horizontalmente m√°s de 20px, cambiar modo
        if (Math.abs(deltaX) > 20) {
            toggleFunction();
        }
        
        isDragging = false;
        e.preventDefault();
    }, {passive: false});
    
    // Para mouse
    toggleElement.addEventListener('mousedown', (e) => {
        dragStart = e.clientX;
        isDragging = true;
        e.preventDefault();
    });
    
    document.addEventListener('mousemove', (e) => {
        if (!isDragging) return;
        e.preventDefault();
    });
    
    document.addEventListener('mouseup', (e) => {
        if (!isDragging) return;
        
        const dragEnd = e.clientX;
        const deltaX = dragEnd - dragStart;
        
        // Si se arrastra horizontalmente m√°s de 20px, cambiar modo
        if (Math.abs(deltaX) > 20) {
            toggleFunction();
        }
        
        isDragging = false;
        e.preventDefault();
    });
}

// Funciones
function getTestStateKey(){ return "testState_" + theme.name + "_" + mode; }

function buildTestButtons(){
    testButtonsDiv.innerHTML="";
    const scores=JSON.parse(localStorage.getItem("moduleScores"))||{};
    themes.forEach((t,i)=>{
        const btn=document.createElement("button"); 
        btn.textContent=t.name;

        const saved = localStorage.getItem("testState_" + t.name + "_" + mode);
        if(saved){ btn.textContent += " üíæ"; }

        btn.onclick=()=>startSelectedTest(i); 
        testButtonsDiv.appendChild(btn);

        const s=scores[t.name]?.[mode];
        if(s?.ultimaNota!==undefined && s?.mejorNota!==undefined){
            const scoreDiv=document.createElement("div");
            const clase=s.ultimaNota<5?"low":s.ultimaNota<8?"mid":"high";
            scoreDiv.className=`saved-module ${clase}`; 
            scoreDiv.id=`score-${i}`;
            scoreDiv.innerHTML=`<p>√öltima nota: ${s.ultimaNota}/10</p>
                                  <p>Mejor nota: ${s.mejorNota}/10</p>`;
            const answersList=s.answers||[];
            const failed=answersList.filter(a=>!a.selected || a.selected!==a.correct);
            if(failed.length>0){
                const failBtn=document.createElement("button"); 
                failBtn.textContent="√öltimos fallos";
                failBtn.style.marginTop="6px"; 
                failBtn.className = "cuart";
                failBtn.onclick=()=>showLastFails(t.name);
                scoreDiv.appendChild(failBtn);
            }
            testButtonsDiv.appendChild(scoreDiv);
        }
    });
}

function startSelectedTest(i){ 
    theme=themes[i]; 
    testSelection.style.display="none"; 
    initTest(false);
}

function goToIndex(){ 
    window.location.href="../index.html";
}

function backToSelection(){ 
    clearInterval(timerInterval); 
    quizCard.style.display="none"; 
    finalScreen.style.display="none"; 
    lastFailsScreen.style.display="none"; 
    buildTestButtons(); 
    testSelection.style.display="block";
}

function showExitConfirmation() {
    confirmDialog.style.display = "flex";
}

function initTest(loadSaved=false){
    if(!theme){ 
        buildTestButtons(); 
        testSelection.style.display="block"; 
        quizCard.style.display="none"; 
        finalScreen.style.display="none"; 
        return;
    }
    
    const saved = localStorage.getItem(getTestStateKey());
    if(!loadSaved && saved){ 
        resumeDialog.style.display="flex"; 
        quizCard.style.display="none"; 
        finalScreen.style.display="none"; 
        return;
    }
    
    resumeDialog.style.display="none"; 
    quizCard.style.display="block"; 
    finalScreen.style.display="none"; 
    lastFailsScreen.style.display="none";
    
    if(loadSaved && saved){ 
        const state=JSON.parse(saved); 
        index=state.index; 
        correct=state.correct; 
        incorrect=state.incorrect; 
        startTime=state.startTime; 
        answers=state.answers; 
        // Recalcular correct e incorrect basado en las respuestas guardadas
        recalculateCounts();
    } else{ 
        index=0; 
        correct=0; 
        incorrect=0; 
        startTime=Date.now(); 
        answers=[]; 
        localStorage.removeItem(getTestStateKey()); 
    }
    
    themeTitle.textContent=theme.name; 
    clearInterval(timerInterval); 
    timerInterval=setInterval(updateTimer,1000); 
    loadQuestion();
}

function recalculateCounts() {
    correct = 0;
    incorrect = 0;
    answers.forEach((answer, idx) => {
        if (answer && answer.selected) {
            if (answer.selected === answer.correct) {
                correct++;
            } else {
                incorrect++;
            }
        }
    });
}

function loadQuestion() {
    const q = theme.questions[index];
    questionText.textContent = q.question;
    optionsDiv.innerHTML = "";
    progress.textContent = `Pregunta ${index+1}/${theme.questions.length}`;

    q.options.forEach(opt => {
        const label = document.createElement("label");
        label.textContent = opt;

        // Si ya hab√≠as respondido
        if (answers[index] && answers[index].selected === opt) {
            label.classList.add("selected");
            
            // En modo estudio, mostrar si la respuesta seleccionada es correcta o incorrecta
            if (mode === "study") {
                if (opt === q.answer) {
                    label.classList.add("option-correct");
                } else {
                    label.classList.add("option-wrong");
                    // Mostrar tambi√©n la respuesta correcta
                    document.querySelectorAll(".options label").forEach(l => {
                        if (l.textContent === q.answer) l.classList.add("option-correct");
                    });
                }
            }
        }

        label.addEventListener("click", () => {
            // Quitar seleccionadas
            document.querySelectorAll(".options label").forEach(l => {
                l.classList.remove("selected", "option-correct", "option-wrong");
            });
            label.classList.add("selected");

            // Guardar respuesta
            const previousAnswer = answers[index];
            const wasCorrect = previousAnswer && previousAnswer.selected === previousAnswer?.correct;
            
            // Si ya hab√≠a una respuesta anterior, quitar su conteo
            if (previousAnswer && previousAnswer.selected) {
                if (wasCorrect) {
                    correct--;
                } else if (previousAnswer.selected) {
                    incorrect--;
                }
            }

            answers[index] = {
                question: q.question,
                options: q.options,
                correct: q.answer,
                selected: opt,
                number: index + 1
            };

            // Contar correctas/incorrectas
            if (opt === q.answer) {
                correct++;
            } else {
                incorrect++;
            }

            // En modo estudio, mostrar inmediatamente si es correcta o incorrecta
            if (mode === "study") {
                document.querySelectorAll(".options label").forEach(l => {
                    if (l.textContent === q.answer) l.classList.add("option-correct");
                    if (l.textContent === opt && opt !== q.answer) l.classList.add("option-wrong");
                });
                
                // Actualizar nota en tiempo real con penalizaci√≥n
                const correctCount = answers.filter(a => a && a.selected === a.correct).length;
                const incorrectCount = answers.filter(a => a && a.selected && a.selected !== a.correct).length;
                const rawScore = correctCount - (incorrectCount/3);
                const notaActual = Math.max(0, (rawScore / theme.questions.length) * 10).toFixed(1);
            }

            saveProgress();
        });

        optionsDiv.appendChild(label);
    });

    prevBtn.style.display = index === 0 ? "none" : "inline-block";
    nextBtn.textContent = index === theme.questions.length - 1 ? "Finalizar" : "Siguiente";
}

function saveProgress(){ 
    localStorage.setItem(getTestStateKey(), JSON.stringify({ 
        index, 
        correct, 
        incorrect, 
        startTime, 
        answers 
    })); 
}

nextBtn.addEventListener("click",()=>{
    const selectedAnswer = answers[index]?.selected || null;
    const q = theme.questions[index];
    
    // Si no hay respuesta guardada, guardar una vac√≠a
    if (!answers[index]) {
        answers[index] = { 
            question: q.question, 
            options: q.options, 
            correct: q.answer, 
            selected: selectedAnswer, 
            number: index+1 
        };
    }
    
    saveProgress();
    
    if(index < theme.questions.length-1){ 
        index++; 
        loadQuestion(); 
    } else { 
        finishTest(); 
    }
});

prevBtn.addEventListener("click",()=>{ 
    if(index>0) {
        index--; 
        loadQuestion(); 
    }
});

backBtn.addEventListener("click", showExitConfirmation);

confirmExitBtn.addEventListener("click", () => {
    confirmDialog.style.display = "none";
    // Guardar el progreso antes de salir
    saveProgress();
    backToSelection();
});

cancelExitBtn.addEventListener("click", () => {
    confirmDialog.style.display = "none";
});

function finishTest(){
    clearInterval(timerInterval); 
    localStorage.removeItem(getTestStateKey()); 
    quizCard.style.display="none"; 
    finalScreen.style.display="block";
    
    // Mostrar el nombre del tema en los resultados
    finalTheme.textContent = `${theme.name}`;
    
    const totalSeconds=Math.floor((Date.now()-startTime)/1000); 
    const min=String(Math.floor(totalSeconds/60)).padStart(2,"0"); 
    const sec=String(totalSeconds%60).padStart(2,"0");
    
    // AMBOS MODOS USAN PENALIZACI√ìN (1/3 por incorrecta)
    const rawScore = correct - (incorrect/3);
    const note = Math.max(0,(rawScore/theme.questions.length)*10).toFixed(2);
    
    summary.innerHTML=`‚úîÔ∏è Correctas: ${correct}<br>‚ùå Incorrectas: ${incorrect}<br>üìù Total preguntas: ${theme.questions.length}`;
    finalTime.textContent=`‚è± Tiempo: ${min}:${sec}`;
    finalNote.innerHTML=`üéØ Nota final: <strong>${note}/10</strong>`;
    
    saveModuleScore(theme.name,note);

    failedContainer.style.display="block"; 
    failedContainer.innerHTML="";
    const failed=answers.filter(a=> !a.selected || (a.selected !== a.correct));
    if(failed.length){
        const failedDiv=document.createElement("div"); 
        failedDiv.innerHTML=`<h3>Preguntas incorrectas o sin responder.</h3>`;
        failed.forEach(a=>{
            const div=document.createElement("div"); 
            div.className="failed-question";
            div.innerHTML=`<div class="question-text">Pregunta ${a.number}: ${a.question}</div>`;
            const opts=document.createElement("div"); 
            opts.className="options";
            a.options.forEach(opt=>{
                const label=document.createElement("label"); 
                label.textContent=opt;
                if(opt===a.correct) label.classList.add("option-correct");
                if(opt===a.selected && opt !== a.correct) label.classList.add("option-wrong");
                opts.appendChild(label);
            });
            div.appendChild(opts); 
            failedDiv.appendChild(div);
        });
        failedContainer.appendChild(failedDiv);
    }
}

function saveModuleScore(moduleName,nota){
    const numericNote=parseFloat(nota);
    const scores=JSON.parse(localStorage.getItem("moduleScores"))||{};
    if(!scores[moduleName]) scores[moduleName]={};
    if(!scores[moduleName][mode]) scores[moduleName][mode]={};
    scores[moduleName][mode].ultimaNota=numericNote;
    scores[moduleName][mode].answers=answers;
    if(!scores[moduleName][mode].mejorNota || numericNote>scores[moduleName][mode].mejorNota) scores[moduleName][mode].mejorNota=numericNote;
    localStorage.setItem("moduleScores",JSON.stringify(scores));
    buildTestButtons();
}

function updateTimer(){ 
    const elapsed=Math.floor((Date.now()-startTime)/1000); 
    const m=String(Math.floor(elapsed/60)).padStart(2,"0"); 
    const s=String(elapsed%60).padStart(2,"0"); 
    timer.textContent=`‚è± ${m}:${s}`; 
}

function restartTest(){ 
    correct=0; 
    incorrect=0; 
    index=0; 
    answers=[]; 
    startTime=Date.now(); 
    localStorage.removeItem(getTestStateKey()); 
    initTest(false); 
}

continueBtn.addEventListener("click",()=>initTest(true));
newBtn.addEventListener("click",()=>restartTest());

function showLastFails(moduleName){
    const scores=JSON.parse(localStorage.getItem("moduleScores"))||{};
    const s = scores[moduleName]?.[mode];
    if(!s?.answers){ alert("No hay respuestas guardadas"); return;}
    const failed=s.answers.filter(a=>!a.selected || a.selected!==a.correct);
    if(failed.length===0){ alert("No hay fallos o sin responder"); return;}
    
    // Mostrar el nombre del tema
    lastFailsTheme.textContent = `${moduleName}`;
    
    lastFailsContainer.innerHTML="";
    failed.forEach(a=>{
        const div=document.createElement("div"); div.className="failed-question";
        div.innerHTML=`<div class="question-text">Pregunta ${a.number}: ${a.question}</div>`;
        const opts=document.createElement("div"); opts.className="options";
        a.options.forEach(opt=>{
            const label=document.createElement("label"); label.textContent=opt;
            if(opt===a.correct) label.classList.add("option-correct");
            if(opt===a.selected) label.classList.add("option-wrong");
            opts.appendChild(label);
        });
        div.appendChild(opts); lastFailsContainer.appendChild(div);
    });
    testSelection.style.display="none"; finalScreen.style.display="none"; quizCard.style.display="none"; lastFailsScreen.style.display="block";
}

// Inicializar
loadSavedMode(); // Cargar el modo guardado en localStorage
initDarkMode(); // Inicializar modo oscuro
initTest();
</script>
</body>
</html>
